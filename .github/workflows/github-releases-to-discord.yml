name: GitHub Releases to Discord Forum

on:
  release:
    types: [published]

jobs:
  publish-post-discord:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Create Discord Forum Post
        run: |
          curl -X POST "${{ secrets.WEBHOOK_URL }}" \
            -H "Authorization: Bot ${{ secrets.DISCORD_BOT_TOKEN }}" \
            -H "Content-Type: application/json" \
            --data '{
              "name": "ðŸš€ Translator (Release ${{ github.event.release.tag_name }})",
              "auto_archive_duration": 4320,
              "message": {
                "content": "**ðŸš€ New Release Available!**\n\nðŸ“¦ **Version:** ${{ github.event.release.tag_name }}\nðŸ”— **Download:** ${{ github.event.release.html_url }}"
              }
            }' \
            --fail \
            --show-error
